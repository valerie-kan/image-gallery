{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\nimport { loader } from '../main';\n\naxios.defaults.baseURL = 'https://pixabay.com/api/';\n\nexport function axiosPhotos(value, page) {\n    loader.classList.remove('is-hidden');\n    \n    const axiosParams = {\n        params: {\n            key: '45515322-6acc0c0fe7102921e2f085c71',\n            q: value,\n            per_page: 15,\n            page: page,\n            image_type: 'photo',\n            orientation: 'horizontal',\n            safesearch: true\n        }\n    }\n    \n    return axios.get('', axiosParams);\n}","export function renderGalleryItem(imgDetails) {\n  return `\n    <li class='gallery-item'>\n        <a class='gallery-link' href='${imgDetails.largeImageURL}'>\n        <img class='gallery-img' src='${imgDetails.webformatURL}' alt='${imgDetails.tags}'>\n        </a>\n        <div class='img-info'>\n        <p><span>Likes</span> ${imgDetails.likes}</p>\n        <p><span>Views</span> ${imgDetails.views}</p>\n        <p><span>Comments</span> ${imgDetails.comments}</p>\n        <p><span>Downloads</span> ${imgDetails.downloads}</p>\n        </div>\n    </li>`;\n}\n","import iziToast from \"izitoast\";\nimport SimpleLightbox from \"simplelightbox\";\n\nimport { axiosPhotos } from './js/pixabay-api.js';\nimport { renderGalleryItem } from './js/render-functions.js';\n\nconst formEl = document.querySelector('.form');\nconst inputEl = document.querySelector('.form-input');\nconst gallery = document.querySelector('.gallery-list');\nexport const loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.load-more-btn');\n\nformEl.addEventListener('submit', submitForm);\nloadMoreBtn.addEventListener('click', loadMoreImg);\n\nconst lightbox = new SimpleLightbox('.gallery-item a', { captionsData: 'alt' });\n\nlet searchedInfo = '';\nlet currentPage = 1;\n\nasync function submitForm(event) {\n    event.preventDefault();\n    if (!loadMoreBtn.classList.contains('is-hidden')) {\n        loadMoreBtn.classList.add('is-hidden');\n    }\n    gallery.innerHTML = '';\n    searchedInfo = inputEl.value.trim();\n    if (searchedInfo === '') {\n        return\n    }\n\n    currentPage = 1;\n\n    try {\n        const infoFromServer = await axiosPhotos(searchedInfo, currentPage);\n        if (infoFromServer.data.hits.length === 0) {\n            loader.classList.add('is-hidden');\n            loadMoreBtn.classList.add('is-hidden');\n            iziToast.error({\n                message: 'Sorry, there are no images matching your search query. Please try again!',\n                position: 'topRight',\n                messageSize: '16',\n                color: 'red',\n                iconColor: 'white',\n            });\n            return \n        }\n        \n        const createGallery = infoFromServer.data.hits\n            .map(imgDetail => renderGalleryItem(imgDetail))\n            .join('');\n        \n        loader.classList.add('is-hidden');\n        gallery.innerHTML = createGallery;\n        lightbox.refresh();\n        loadMoreBtn.classList.remove('is-hidden');\n\n        if (infoFromServer.data.total <= 15) {\n            loadMoreBtn.classList.add('is-hidden');\n        }\n\n        formEl.reset();\n\n    } catch (err) {\n        iziToast.error({\n            message: err.message,\n            position: 'center',\n            messageSize: '16',\n            color: 'red',\n            iconColor: 'white',\n        })\n    } finally {\n        loader.classList.add('is-hidden');\n    }\n}\n\nasync function loadMoreImg() {\n    currentPage++;\n    loader.classList.remove('is-hidden');\n    try {\n        const infoFromServer = await axiosPhotos(searchedInfo, currentPage);\n\n        const createGallery = infoFromServer.data.hits\n            .map(imgDetail => renderGalleryItem(imgDetail))\n            .join('');\n\n        gallery.insertAdjacentHTML('beforeend', createGallery);\n        lightbox.refresh();\n\n        const galleryElement = document.querySelector('li');\n        const imgHeight = galleryElement.getBoundingClientRect().height;\n        window.scrollBy({\n            top: 2 * imgHeight,\n            behavior: \"smooth\",\n        });\n\n        if (currentPage === Math.ceil(infoFromServer.data.total / 15)) {\n            loadMoreBtn.classList.add('is-hidden');\n            iziToast.info({\n            message: \"We're sorry, but you've reached the end of search results.\",\n            position: 'topRight',\n            messageSize: '16',\n        })\n        }\n\n    } catch (err) {\n        iziToast.error({\n            message: err,\n            position: 'center',\n            messageSize: '16',\n            color: 'red',\n            iconColor: 'white'\n        })\n    } finally {\n        loader.classList.add('is-hidden');\n    }\n}"],"names":["axios","axiosPhotos","value","page","loader","axiosParams","renderGalleryItem","imgDetails","formEl","inputEl","gallery","loadMoreBtn","submitForm","loadMoreImg","lightbox","SimpleLightbox","searchedInfo","currentPage","event","infoFromServer","iziToast","createGallery","imgDetail","err","imgHeight"],"mappings":"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"}